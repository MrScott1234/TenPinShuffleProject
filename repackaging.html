<!DOCTYPE html>
<html>
<head>
<title>Repackaging</title>
<link rel="stylesheet" href="style.css">
</head>
<body style="font-family: Tahoma, sans-serif;">

<div class="container">
<a href="index.html"><- Back</a>
</div>

<h1>Repackaging</h1>

<hr>

<div class="container">
<p>
Repackaging is taking the modified game assets, and zipping them back up into an .APK file that you can play on your phone.
However, it does require a few extra steps.
</p>

<h4>NOTE: Any method of re-signing an .APK will work, but this is simply the way I have found to be relatively simple to do.</h4>

</div>

<p>&nbsp</p>

<h2>Step 1: Remove the META-INF file</h2>

<hr>

<div class="container">
<p>
First step is to make sure you delete the META-INF file from the source assets.
This is done to allow us to sign the .APK file later.
</p>
<img src="https://user-images.githubusercontent.com/97776260/149640594-74241b1a-dd91-447c-9428-ee3459e9b034.png"></img>
</div>

<p>&nbsp</p>

<h2>Step 2: Run my repackaging tool</h2>
<hr>
<div class="container">
<p>
To actually repackage the contents into an .APK file, I've created a <a href="https://github.com/MrScott1234/TenPinShuffleProject/tree/main/repackaging">very simple tool</a> that can do it for you.
After launching it you should be greeted with a window requesting a directory. This is what folder to package.
You should target the folder above the assets folder like so:
</p>

<img src="https://user-images.githubusercontent.com/97776260/149640567-ee7816e8-f090-408d-b389-4d0154d4a285.png" style="width: 75%;"></img>

<p>Next, you should be greeted with another window requesting a directory. This is where the apk file will be dumped.</p>
</div>

<p>&nbsp</p>
<h2>Step 3: Sign the .APK</h2>
<hr>

<div class="container">
<p>
By default, the .APK does not have a signature, and therefore will not work on any device.
To fix this, we will need to re-sign the .APK file, and it's why we deleted that META-INF file.
</p>

<h4>NOTE: You will need to install <a href="https://www.oracle.com/java/technologies/javase/jdk14-archive-downloads.html">JDK 14.0.2</a> to get the jarsigner application needed to sign the APK.</h4>

<p>
In the repackaging folder, edit the "sign.bat" file; as we will need to make some changes to make it work.
</p>

<code>cd DIRECTORY_HERE
"C:\Program Files\Java\jdk-14.0.2\bin\jarsigner" -verbose -keystore my-release-key.keystore "10_Pin_Shuffle_base.apk" alias_name
</code>

<p>
Specifically, we will need to change the DIRECTORY_HERE to be the folder that the APK is located in.
</p>

<h4>NOTE: If you installed the JDK in a different location, you will need to change the location in the .bat file.</h4>

<p>
After that, simply double click the file to sign it.
You will be prompted to enter the keystore's password to continue.
I've set the provided keystore password to "password".
</p>

<img src="https://user-images.githubusercontent.com/97776260/149714079-c77ecafc-31d4-42a9-92d3-330d6ee222ac.png" style="width: 100%;"></img>

<p>
If you're using your own keystore, you will have to change the keystore file name and the alias_name in the .bat file.
</p>
</div>

<p>&nbsp</p>

<h2>Step 4: Finished!</h2>

<div class="container">
<p>
Congrats! You've packaged the game successfully. Now just put it back onto an Android device and install it.
</p>
<h4>NOTE: You may need to adjust your security settings to allow the app to install.</h4>
</div>

<p>&nbsp</p>

<div class="container">
<center><p><a href="changingmaterialproperties.html"><- Previous Page: Changing 3D Asset Material Properties (WIP)</a></p></center>
</div>

<p>&nbsp</p>
<p>&nbsp</p>
<p>&nbsp</p>

</body>
</html>
